flowchart TD
    A[开始] --> B[开发者创建分支]
    B --> C[提交代码变更]
    C --> D[创建Pull Request]
    D --> E{自动检查}

    E -->|CI失败| F[修复代码]
    F --> C

    E -->|CI通过| G[等待代码审查]
    G --> H{审查结果}

    H -->|请求修改| I[修改代码]
    I --> C

    H -->|批准| J{检查分支保护规则}

    J -->|不满足| K[等待更多审批]
    K --> H

    J -->|满足| L{选择合并策略}

    L -->|Merge| M[创建合并提交]
    L -->|Squash| N[压缩为单个提交]
    L -->|Rebase| O[变基合并]

    M --> P[更新目标分支]
    N --> P
    O --> P

    P --> Q{删除源分支?}
    Q -->|是| R[删除源分支]
    Q -->|否| S[保留源分支]

    R --> T[PR合并完成]
    S --> T
    T --> U[结束]
