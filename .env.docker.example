# ============================================
# Flotilla Docker Compose 环境变量模板
# ============================================
# 使用方法:
# 1. 复制此文件为 .env.docker
# 2. 填入实际的安全凭证
# 3. 运行: docker-compose --env-file .env.docker up -d
# ============================================

# PostgreSQL 配置
POSTGRES_USER=devplatform
POSTGRES_PASSWORD=<生成一个强密码，例如: openssl rand -base64 32>
POSTGRES_DB=flotilla

# Redis 配置
REDIS_PASSWORD=<生成一个强密码，例如: openssl rand -base64 24>

# MinIO 配置
MINIO_ROOT_USER=<生成一个访问密钥，例如: openssl rand -hex 16>
MINIO_ROOT_PASSWORD=<生成一个密钥，例如: openssl rand -base64 32>
MINIO_BUCKET_NAME=flotilla-storage

# MeiliSearch 配置
MEILI_MASTER_KEY=<生成一个主密钥，例如: openssl rand -base64 32>

# JWT 配置 (至少32字符)
JWT_SECRET=<生成一个JWT密钥，例如: openssl rand -base64 32>
JWT_REFRESH_SECRET=<生成一个刷新密钥，例如: openssl rand -base64 32>
JWT_EXPIRATION=7d
JWT_REFRESH_EXPIRATION=30d

# 应用配置
NODE_ENV=development
FRONTEND_URL=http://localhost:3000
WEBSITE_URL=http://localhost:3003
NEXT_PUBLIC_API_URL=http://localhost:4000/api/v1
GIT_STORAGE_PATH=/app/repos

# CORS配置 (多个域名用逗号分隔)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3003

# 管理员配置
INITIAL_ADMIN_EMAIL=your-email@example.com

# Two-Factor Authentication (至少32字符)
TWO_FACTOR_ENCRYPTION_KEY=<生成一个加密密钥，例如: openssl rand -base64 32>

# ============================================
# OAuth 配置 (可选，启用社交登录需要)
# ============================================

# GitHub OAuth (https://github.com/settings/developers)
GITHUB_CLIENT_ID=<你的GitHub OAuth App Client ID>
GITHUB_CLIENT_SECRET=<你的GitHub OAuth App Client Secret>
GITHUB_CALLBACK_URL=http://localhost:4000/api/v1/auth/oauth/github/callback

# Google OAuth (https://console.cloud.google.com/apis/credentials)
GOOGLE_CLIENT_ID=<你的Google OAuth Client ID>
GOOGLE_CLIENT_SECRET=<你的Google OAuth Client Secret>
GOOGLE_CALLBACK_URL=http://localhost:4000/api/v1/auth/oauth/google/callback

# ============================================
# SMTP 邮件配置 (可选，启用邮件功能需要)
# ============================================

SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=<SMTP用户名>
SMTP_PASS=<SMTP密码>
SMTP_FROM_EMAIL=noreply@example.com
SMTP_FROM_NAME=Flotilla

# ============================================
# Webhook 配置
# ============================================

WEBHOOK_SECRET=<生成一个Webhook密钥，例如: openssl rand -base64 32>

# ============================================
# Raft 集群配置 (可选，分布式部署需要)
# ============================================

# RAFT_NODE_ID=node-1
# RAFT_CLUSTER_NODES=node-1:4001,node-2:4001,node-3:4001
# RAFT_ELECTION_TIMEOUT_MIN=150
# RAFT_ELECTION_TIMEOUT_MAX=300
# RAFT_HEARTBEAT_INTERVAL=50
