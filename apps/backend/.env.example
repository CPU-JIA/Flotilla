# ============================================
# Flotilla Backend Environment Variables
# ============================================
# å¤åˆ¶æ­¤æ–‡ä»¶ä¸º .env å¹¶å¡«å†™å®é™…å€¼
# cp .env.example .env
#
# âš ï¸ ç”Ÿæˆå¼ºå¯†é’¥: openssl rand -base64 32
# ============================================

# ============================================
# æ•°æ®åº“é…ç½® (Database Configuration)
# ============================================
DATABASE_URL="postgresql://user:password@localhost:5434/flotilla?schema=public"

# ğŸ”’ PERFORMANCE FIX: æ•°æ®åº“è¿æ¥æ± é…ç½® (å¯é€‰ï¼Œæœ‰é»˜è®¤å€¼)
DATABASE_CONNECTION_LIMIT=20  # è¿æ¥æ± å¤§å°é™åˆ¶ (é»˜è®¤: 20)
DATABASE_POOL_TIMEOUT=20      # è¿æ¥æ± è¶…æ—¶æ—¶é—´(ç§’) (é»˜è®¤: 20)

# ============================================
# JWT é…ç½® (JWT Configuration)
# ============================================
# âš ï¸ CRITICAL: ç”Ÿäº§ç¯å¢ƒå¿…é¡»è®¾ç½® â‰¥32 å­—ç¬¦çš„å¼ºå¯†é’¥ï¼
# ç”Ÿæˆå‘½ä»¤: openssl rand -base64 43 (æ¨èä½¿ç”¨43å­—ç¬¦ä»¥ç¬¦åˆHS256æ ‡å‡†)
# âš ï¸ NEVER use these placeholder values in production!
JWT_SECRET="REPLACE_WITH_RANDOM_STRING_openssl_rand_base64_43_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
JWT_REFRESH_SECRET="REPLACE_WITH_RANDOM_STRING_openssl_rand_base64_43_YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY"
JWT_EXPIRATION="15m"    # Access Token æœ‰æ•ˆæœŸ (é»˜è®¤: 15åˆ†é’Ÿ)
JWT_REFRESH_EXPIRATION="7d"  # Refresh Token æœ‰æ•ˆæœŸ (é»˜è®¤: 7å¤©)

# ============================================
# Two-Factor Authentication (åŒå› ç´ è®¤è¯)
# ============================================
# âš ï¸ CRITICAL: ç”¨äºåŠ å¯†å­˜å‚¨ TOTP å¯†é’¥å’Œæ¢å¤ç  (AES-256-GCM)
# âš ï¸ è‡³å°‘32å­—ç¬¦ï¼ä¸€æ—¦è®¾ç½®åä¸è¦æ›´æ”¹ï¼Œå¦åˆ™ç”¨æˆ·å°†æ— æ³•è®¿é—®2FA
# ç”Ÿæˆå‘½ä»¤: openssl rand -base64 32
# âš ï¸ NEVER use this placeholder value in production!
TWO_FACTOR_ENCRYPTION_KEY="REPLACE_WITH_RANDOM_STRING_openssl_rand_base64_32_ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ"

# ============================================
# å®‰å…¨é…ç½® (Security Configuration)
# ============================================
NODE_ENV="development"  # development | production | test
REQUIRE_EMAIL_VERIFICATION="false"  # æ˜¯å¦å¼ºåˆ¶é‚®ç®±éªŒè¯ (ç”Ÿäº§ç¯å¢ƒå»ºè®®: true)

# ğŸ”’ SECURITY FIX: CSRF ä¿æŠ¤ (ç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨å¯ç”¨)
ENABLE_CSRF="true"  # æ˜¯å¦å¯ç”¨CSRFä¿æŠ¤ (é»˜è®¤: true, ä»…ç”Ÿäº§ç¯å¢ƒç”Ÿæ•ˆ)

# åˆå§‹ç®¡ç†å‘˜é‚®ç®± (é¦–ä¸ªæ³¨å†Œç”¨æˆ·è‡ªåŠ¨æå‡ä¸ºSUPER_ADMIN)
# âš ï¸ CRITICAL: ç”Ÿäº§ç¯å¢ƒå¿…é¡»è®¾ç½®ï¼
INITIAL_ADMIN_EMAIL="admin@example.com"

# ============================================
# Webhook é…ç½® (Webhook Configuration)
# ============================================
# âš ï¸ å¯é€‰ï¼šç”¨äºéªŒè¯æ¥è‡ªå¤–éƒ¨CI/CDç³»ç»Ÿçš„webhookç­¾å (HMAC-SHA256)
# å¦‚æœä¸è®¾ç½®ï¼Œç³»ç»Ÿä¼šä¸ºæ¯ä¸ªwebhookè‡ªåŠ¨ç”Ÿæˆå¯†é’¥
# ç”Ÿæˆå‘½ä»¤: openssl rand -base64 32
WEBHOOK_SECRET=""

# ============================================
# é‚®ä»¶æœåŠ¡é…ç½® (Email Service Configuration)
# ============================================
EMAIL_HOST="smtp.gmail.com"
EMAIL_PORT=587
EMAIL_USER="your-email@gmail.com"
EMAIL_PASSWORD="your-app-password"
EMAIL_FROM="Flotilla <noreply@flotilla.dev>"

# ============================================
# Redis é…ç½® (Redis Configuration)
# ============================================
REDIS_HOST="localhost"
REDIS_PORT=6380
REDIS_PASSWORD=""  # å¯é€‰
REDIS_DB=0

# ============================================
# MinIO é…ç½® (Object Storage Configuration)
# ============================================
MINIO_ENDPOINT="localhost"
MINIO_PORT=9000
MINIO_USE_SSL=false
# âš ï¸ CRITICAL: NEVER use default credentials in production!
# Change these to strong, unique values immediately!
MINIO_ACCESS_KEY="REPLACE_WITH_STRONG_ACCESS_KEY_XXXXXXXXXXXXXXXX"
MINIO_SECRET_KEY="REPLACE_WITH_STRONG_SECRET_KEY_YYYYYYYYYYYYYYYYYY"
MINIO_BUCKET="flotilla"

# ============================================
# MeiliSearch é…ç½® (Search Engine Configuration)
# ============================================
MEILISEARCH_HOST="http://localhost:7700"
MEILISEARCH_API_KEY=""  # å¯é€‰

# ============================================
# CORS é…ç½® (CORS Configuration)
# ============================================
# æ–¹å¼1: å¤šåŸŸåé…ç½® (ç”Ÿäº§ç¯å¢ƒæ¨è)
CORS_ALLOWED_ORIGINS="https://your-frontend.com,https://www.your-frontend.com"

# æ–¹å¼2: å•ç‹¬é…ç½® (å¼€å‘ç¯å¢ƒ)
FRONTEND_URL="http://localhost:3000"
WEBSITE_URL="http://localhost:3003"

# ============================================
# åº”ç”¨é…ç½® (Application Configuration)
# ============================================
PORT=4000  # åç«¯æœåŠ¡ç«¯å£

# ============================================
# Git å­˜å‚¨é…ç½® (Git Storage Configuration)
# ============================================
GIT_STORAGE_PATH="./repos"  # Git ä»“åº“å­˜å‚¨è·¯å¾„ (é»˜è®¤: ./repos)

# ============================================
# OAuth/SSO é…ç½® (OAuth/SSO Configuration)
# ============================================
# GitHub OAuth - https://github.com/settings/developers
GITHUB_CLIENT_ID=""
GITHUB_CLIENT_SECRET=""
GITHUB_CALLBACK_URL="http://localhost:4000/auth/oauth/github/callback"

# Google OAuth - https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""
GOOGLE_CALLBACK_URL="http://localhost:4000/auth/oauth/google/callback"

# Enterprise SAML SSO (é¢„ç•™é…ç½®)
SAML_ENTRY_POINT=""
SAML_ISSUER=""
SAML_CERT=""
SAML_CALLBACK_URL="http://localhost:4000/auth/oauth/saml/callback"

# ============================================
# SMTP é‚®ä»¶é…ç½® (SMTP Email Configuration)
# ============================================
# æ¨èæœåŠ¡å•†:
#   - Brevo: https://www.brevo.com/ (å…è´¹é¢åº¦: 9000å°/æœˆ)
#   - SendGrid: https://sendgrid.com/ (å…è´¹é¢åº¦: 100å°/å¤©)
#   - Mailgun: https://www.mailgun.com/ (å…è´¹é¢åº¦: 5000å°/æœˆ)
SMTP_HOST="smtp.your-provider.com"
SMTP_PORT=587  # 587 for STARTTLS, 465 for SSL/TLS
SMTP_SECURE=""  # ç©ºå€¼è¡¨ç¤ºä½¿ç”¨STARTTLS (587ç«¯å£), "true"è¡¨ç¤ºSSL (465ç«¯å£)
SMTP_USER="your-smtp-username@domain.com"
SMTP_PASS="YOUR_SMTP_PASSWORD_OR_API_KEY"
SMTP_FROM_EMAIL="noreply@your-domain.com"
SMTP_FROM_NAME="Flotilla Team"

# ============================================
# æµ‹è¯•ç¯å¢ƒé…ç½® (Testing Configuration)
# ============================================
# ä»…æµ‹è¯•ç¯å¢ƒä½¿ç”¨
SEED_ADMIN_EMAIL="admin@test.com"  # ç§å­ç®¡ç†å‘˜é‚®ç®±
SEED_ADMIN_PASSWORD="AdminPass123!"  # ç§å­ç®¡ç†å‘˜å¯†ç 

# ============================================
# Sentry é”™è¯¯ç›‘æ§é…ç½® (Sentry Error Monitoring)
# ============================================
# ğŸ” å¯é€‰ï¼šç”Ÿäº§ç¯å¢ƒå¼ºçƒˆæ¨èå¯ç”¨
# è·å–DSN: https://sentry.io/settings/projects/
SENTRY_ENABLE="false"  # æ˜¯å¦å¯ç”¨Sentryç›‘æ§ (true/false)
SENTRY_DSN=""  # Sentry DSNåœ°å€ (ä¾‹: https://xxx@xxx.ingest.sentry.io/xxx)
SENTRY_ENVIRONMENT="development"  # ç¯å¢ƒåç§° (development/staging/production)
SENTRY_RELEASE=""  # å‘å¸ƒç‰ˆæœ¬ (å¯é€‰ï¼Œä¾‹: backend@1.0.0)
SENTRY_TRACES_SAMPLE_RATE="0.1"  # æ€§èƒ½è¿½è¸ªé‡‡æ ·ç‡ (0.0-1.0ï¼Œé»˜è®¤0.1å³10%)
SENTRY_PROFILES_SAMPLE_RATE="0.1"  # æ€§èƒ½åˆ†æé‡‡æ ·ç‡ (0.0-1.0ï¼Œé»˜è®¤0.1å³10%)
SENTRY_ENABLE_PROFILING="false"  # æ˜¯å¦å¯ç”¨æ€§èƒ½åˆ†æ (true/falseï¼Œéœ€è¦æ›´å¤šèµ„æº)
